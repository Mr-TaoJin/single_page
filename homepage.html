<!DOCTYPE html>
<html lang="ch">
<head>
    <title>耐克下单列表</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="description" content="description">

    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/weui.min.css">
    <link rel="stylesheet" href="./css/jquery-weui.min.css">
</head>
<body>
<div class="page">
   <div class="title">耐克下单列表</div>
   <div class="weui_search">
        <div class="weui-search-bar" id="searchBar">
                <form class="weui-search-bar__form">
                    <div class="weui-search-bar__box">
                    <i class="weui-icon-search" style="cursor:pointer"></i>
                    <input type="search" class="weui-search-bar__input" id="search_value" placeholder="搜索">
                    <a href="javascript:" class="weui-icon-clear" id="searchClear"></a>
                    </div>
                    <label class="weui-search-bar__label" id="searchText">
                    <i class="weui-icon-search" style="cursor:pointer"></i></i>
                    <span>搜索</span>
                    </label>
                </form>
                <a href="javascript:" class="weui-search-bar__cancel-btn" id="searchCancel">取消</a>
            </div>
        </div>
   <div class="ul_table text_center">
       <table>
           <thead>
               <tr>
                   <th>ID</th>
                   <th>货号</th>
                   <th>用户名</th>
                   <th>开始时间</th>
                   <th>订单状态</th>
                   <th>下单时间</th>
                   <th>付款按钮</th>
               </tr>
           </thead>
           <tbody id="data">
               <tr>
                    <td>1</td>
                    <td>12</td>
                    <td>nai02153@deiie.com/Jp643125101	</td>
                    <td>2018-09-30 20:53:36</td>
                    <td>已付款</td>
                    <td>2018-09-30 20:53:36</td>
                    <td>
                        <button onclick="payment()">去付款</button>
                        <button onclick="payment_go()">付完款请点这儿</button>
                    </td>
                </tr>
                <!-- <tr><td colspan="7">暂无数据</td></tr> -->
           </tbody>
       </table>
   </div>
</div>
<script src="./jquery/jquery-2.1.4.js"></script>
<script src="./jquery/jquery-weui.min.js"></script>
<script type="text/javascript">

    //请求数据
    function request(id){
        var data = id;
        $.ajax({
            "type":"post",//get/post
            "data":data,
            "url":"接口", 
            "success":function(ret){
                // 成功后进行dom操作
                if(ret.isSuccess){ 
                    // 拼接数据，js for循环    
                    //  ``  动态数据渲染 例： {{ ret.result}}
                    $("#data").html(`
                        <tr>
                            <td>{{ ret.result}}</td>
                            <td>12</td>
                            <td>nai02153@deiie.com/Jp643125101	</td>
                            <td>2018-09-30 20:53:36</td>
                            <td>已付款</td>
                            <td>2018-09-30 20:53:36</td>
                            <td>
                                    <button onclick="payment()">去付款</button>
                                    <button onclick="payment_go()">付完款请点这儿</button>
                            </td>
                        </tr>
                    `
                    );
                }else{
                    $("#data").html(
                        `<tr><td colspan="7">暂无数据</td></tr>`
                    )
                }
            }
        })
    }
    //去付款
    function payment(){
        window.open('https://mapi.alipay.com/gateway.do?body=Nike+HK+Official+site.+Nike.com+PRODUCTS&total_fee=369.00&subject=Nike+HK+Official+site.+Nike.com+PRODUCTS&notify_url=http%3A%2F%2Fm.nike.com.hk%2Fpayment%2F22%2Ffeedback&service=create_forex_trade_wap&partner=2088611936615857&out_trade_no=NH35795036&timeout_rule=12h&return_url=http%3A%2F%2Fm.nike.com.hk%2Ftransaction%2FpaymentSuccess%2FNH35795036&currency=HKD&sign=c85358f428c44d4f8faf447bc75ae74c&sign_type=MD5',"_blank")
    }
    //付完款请点这儿
    function payment_go(){
        if(!confirm('确定已付款？')){
            return false;
        }
        request();
    }
    // 搜索
    $('#search_value').bind('keypress',function(event){     
        // 获取搜索的值
        var data = $('#search_value').val();
        if (event.keyCode == 13) { 
            request(data);  
        }        
    });


    //定时请求接口
    var time = setInterval(function() {
        console.log('123')
        // request();
    }, 3000);//设置请求
    

    // 首次进入执行的js代码
    $(function(){
        // request();//调接口
    })
</script>
</body>